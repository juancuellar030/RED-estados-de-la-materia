<!DOCTYPE html>
<html lang="es">
<head>
    <!-- In the <head> section -->
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio Virtual - RED Estados de la Materia</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="lab-page">
    <canvas id="matrix-canvas"></canvas>

    <main class="lab-container">
        <h1 class="page-title lab-content">Laboratorio Virtual: Materia y sus Estados</h1>
        <p class="subtitle lab-content">Accediendo a la base de datos. Cargando módulos de simulación...</p>

        <!-- MÓDULO 1: MATERIALES (CON VISOR 3D INTEGRADO) -->
        <section class="lab-module lab-content" id="module-1">
            <h2>Módulo 1: Identificación de Materiales</h2>
            <p>Haz clic en una tarjeta para analizar la estructura de la muestra en el visor 3D interactivo.</p>
        
            <!-- 1. TARJETAS DE MATERIALES (AHORA CON DATA-ATTRIBUTES) -->
            <div class="material-cards">
                <div class="material-card" data-material="metal"><h3>Metal</h3><p>Duro, a menudo brillante, buen conductor del calor y la electricidad. Usado en herramientas y estructuras.</p></div>
                <div class="material-card" data-material="plastico"><h3>Plástico</h3><p>Ligero, versátil y aislante. Puede ser rígido o flexible. Usado en juguetes y contenedores.</p></div>
                <div class="material-card" data-material="madera"><h3>Madera</h3><p>Proviene de los árboles. Es resistente pero más ligera que el metal. Usada en muebles y construcción.</p></div>
                <div class="material-card" data-material="tela"><h3>Tela</h3><p>Flexible y suave. Hecha de fibras. Usada para ropa y carpas.</p></div>
            </div>
        
            <!-- 2. EL VISOR 3D -->
            <div id="material-viewer-container">
                <!-- Default message -->
                <div id="viewer-default" class="material-viewer active">
                    <p class="viewer-prompt">SELECCIONE UNA MUESTRA PARA INICIAR SIMULACIÓN</p>
                </div>
                
                <!-- Metal Viewer -->
                <div id="viewer-metal" class="material-viewer">
                    <model-viewer src="assets/metal-model.glb" alt="A 3D model of a metal object" camera-controls auto-rotate ar shadow-intensity="1.2" environment-image="neutral" exposure="1.5">
                    </model-viewer>
                </div>
                
                <!-- Plastic Viewer -->
                <div id="viewer-plastico" class="material-viewer">
                    <model-viewer src="assets/plastic-model.glb" alt="A 3D model of a plastic structure" camera-controls auto-rotate ar shadow-intensity="1.2" environment-image="neutral" exposure="1.5">
                    </model-viewer>
                </div>
                
                <!-- Wood Viewer -->
                <div id="viewer-madera" class="material-viewer">
                     <model-viewer src="assets/wood-model.glb" alt="A 3D model of a wood structure" camera-controls auto-rotate ar shadow-intensity="1.2" environment-image="neutral" exposure="1.5">
                     </model-viewer>
                </div>
                
                <!-- Fabric Viewer -->
                <div id="viewer-tela" class="material-viewer">
                    <model-viewer src="assets/fabric-model.glb" alt="A 3D model of a fabric weave" camera-controls auto-rotate ar shadow-intensity="1.2" environment-image="neutral" exposure="1.5">
                    </model-viewer>
                </div>
            
                <!-- THE KEY CHANGE: Zoom buttons are now INSIDE the container -->
                <div class="viewer-controls">
                    <button id="zoom-in-button" class="cta-button zoom-button" title="Zoom In">+</button>
                    <button id="zoom-out-button" class="cta-button zoom-button" title="Zoom Out">-</button>
                </div>
            </div>
        </section>

        <!-- MÓDULO 2: ESTADOS DE LA MATERIA -->
        <section class="lab-module lab-content" id="module-2">
            <h2>Módulo 2: Simulación de Estados</h2>
            <p>Los materiales existen en diferentes estados. Selecciona un estado en la consola para analizar sus propiedades a nivel molecular.</p>
            <div class="state-simulation">
            <div class="state-controls">
                <button class="state-button active" data-state="solido">SÓLIDO</button>
                <button class="state-button" data-state="liquido">LÍQUIDO</button>
                <button class="state-button" data-state="gaseoso">GASEOSO</button>
            </div>
        
            <!-- El Visor y la Info ahora están juntos -->
            <div class="state-display">
            <!-- SIMULACIÓN VISUAL DEL ESTADO SÓLIDO (CORREGIDO) -->
            <div class="molecule-viewer active" id="viewer-solido">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
            <!-- SIMULACIÓN VISUAL DEL ESTADO LÍQUIDO (CORREGIDO) -->
            <div class="molecule-viewer" id="viewer-liquido">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
            <!-- SIMULACIÓN VISUAL DEL ESTADO GASEOSO (CORREGIDO) -->
            <div class="molecule-viewer" id="viewer-gaseoso">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
            
                <!-- La Información del Estado -->
                <div class="state-info">
                    <div class="state-description active" id="info-solido">
                        <h3>Propiedades del Estado Sólido</h3>
                        <p>Las partículas están fuertemente unidas en una estructura fija. Vibran, pero no se desplazan. Tienen forma y volumen definidos. <strong>Ejemplo:</strong> Un cubo de hielo.</p>
                    </div>
                    <div class="state-description" id="info-liquido">
                        <h3>Propiedades del Estado Líquido</h3>
                        <p>Las partículas están juntas pero pueden deslizarse unas sobre otras. No tienen forma definida y adoptan la del recipiente. Tienen volumen definido. <strong>Ejemplo:</strong> Agua en un vaso.</p>
                    </div>
                    <div class="state-description" id="info-gaseoso">
                        <h3>Propiedades del Estado Gaseoso</h3>
                        <p>Las partículas están muy separadas y se mueven a gran velocidad. No tienen forma ni volumen definidos; ocupan todo el espacio disponible. <strong>Ejemplo:</strong> Vapor de agua.</p>
                    </div>
                </div>
            </div>
        </div>
        </section>

        <!-- MÓDULO 3: CAMBIOS DE ESTADO -->
        <section class="lab-module lab-content" id="module-3">
            <h2>Módulo 3: Procesos de Transformación</h2>
            <p>El calor y el frío pueden causar que un material cambie de un estado a otro. Estos son cambios físicos, la sustancia sigue siendo la misma.</p>
            <div class="state-change-diagram">
                <div class="state-node solid">SÓLIDO</div>
                <div class="process-arrow fusion"><span>Fusión →</span></div>
                <div class="state-node liquid">LÍQUIDO</div>
                <div class="process-arrow vaporizacion"><span>Vaporización →</span></div>
                <div class="state-node gas">GASEOSO</div>
                <div class="process-arrow solidificacion"><span>← Solidificación</span></div>
            </div>
        </section>

        <div class="navigation-buttons lab-content">
            <a href="index.html" class="cta-button">‹ Volver al Inicio</a>
        </div>
    </main>
    
    <script src="script.js"></script>

    <button id="ava-toggle-button" title="Ocultar Asistente">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/><path fill-rule="evenodd" d="M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.974 0 9.19 3.226 10.678 7.697a.75.75 0 0 1 0 .606C21.19 17.024 16.973 20.25 12.001 20.25c-4.974 0-9.19-3.226-10.678-7.697a.75.75 0 0 1 0-.606ZM12 17.25a5.25 5.25 0 1 0 0-10.5 5.25 5.25 0 0 0 0 10.5Z" clip-rule="evenodd" /></svg>
    </button>
    
    <!-- AVATAR (Lab Version) -->
    <div id="ava-container">
        <img src="assets/ava-teleport-alexa.png" alt="Teleport Effect" class="ava-teleport-effect">
        <img src="assets/ava-character-alexa.png" alt="Asistente Virtual AVA" class="ava-character-image">
        <button id="ava-play-button" title="Reproducir audio del asistente">▶</button>
    </div>

    <!-- AUDIO FILES -->
    <audio id="ava-audio-welcome" src="assets/ava-welcome-screen.mp3" preload="auto"></audio>
    <audio id="ava-audio-problems" src="assets/ava-core-problem.mp3" preload="auto"></audio>
    <audio id="ava-audio-ar" src="assets/ava-ar.mp3" preload="auto"></audio>
    <audio id="ava-audio-teleport" src="assets/ava-teleport.mp3" preload="auto"></audio>
    <!-- New Audio File for the Lab -->
    <audio id="ava-audio-lab" src="assets/ava-laboratorio-virtual-audio.mp3" preload="auto"></audio>
</body>
</html>
